import sys
sys.stdin = open('input.txt')

def check_brackets(string):
    stack = []
    
    for char in string:
        # -------------------------------------------------
        # [실습 1] 여는 괄호 처리
        # -------------------------------------------------
        # 문자열 '([{' 안에 char가 포함되어 있다면 여는 괄호입니다.
        if char in '([{':  # 문자열은 시퀀스이기 때문에 in 연산자 사용 가능
        # [other] if char == '(' or ...
            # TODO: 여는 괄호는 나중에 짝을 맞추기 위해 스택에 넣습니다(push).
            stack.append(char)
            
        # -------------------------------------------------
        # [실습 2] 닫는 괄호 처리
        # -------------------------------------------------
        # 문자열 ')]}' 안에 char가 포함되어 있다면 닫는 괄호입니다.
        elif char in ')]}':
            
            # 1. 닫는 괄호가 나왔는데 스택이 비어있다면? (여는 괄호 부족)
            # TODO: 스택의 길이(len)를 확인하여 비어있으면 -1 반환
            if len(stack) == 0:
                return -1
            
            # 2. 스택에서 가장 최근에 넣은 여는 괄호를 꺼냅니다(pop).
            # TODO: pop 연산 수행
            open_char = stack.pop()
            
            # 3. 짝이 맞는지 일일이 확인합니다. (하나라도 안 맞으면 실패)
            # - 소괄호 짝 검사
            if char == ')' and open_char != '(':
                return -1
            
            # - 대괄호 짝 검사
            # TODO: 현재 문자가 ']' 인데 꺼낸 문자가 '[' 가 아니라면?
            elif char == ']' and open_char != '[':
                return -1
                
            # - 중괄호 짝 검사
            # TODO: 현재 문자가 '}' 인데 꺼낸 문자가 '{' 가 아니라면?
            elif char == '}' and open_char != '{':
                return -1
            
        # 괄호가 아닌 다른 문자(숫자 등)는 그냥 넘어갑니다.
        else:
            continue
            
    # -------------------------------------------------
    # [실습 3] 최종 결과 판별
    # -------------------------------------------------
    # 반복문이 다 끝났는데 스택에 뭔가 남아있다면? (여는 괄호 과다)
    # TODO: 스택이 비어있는지 확인하여 결과 반환
    if len(stack) == 0:
        return 1  # 성공 (깔끔하게 비어있음)
    else:
        return -1 # 실패 (잔여물 있음)


T = int(input())
for tc in range(1, T + 1):
    line = input()
    print(f'#{tc} {check_brackets(line)}')
